# 메모리 구조

## 김현수

### 메모리의 구조
- 프로그램이 실행되기 위해서는 먼저 프로그램이 메모리에 로드(load)되어야 하며, 프로그램에서 사용되는 변수들을 저장할 메모리도 필요하다.
- 따라서 컴퓨터의 운영체제는 프로그램의 실행을 위해 다양한 메모리 공간을 제공한다.
- 프로그램이 운영체제로부터 할당받는 대표적인 메모리 공간은 코드, 데이터, 스택, 힙 영역이다.

### 코드(code) 영역
- 메모리의 코드(code) 영역은 실행할 프로그램의 코드가 저장되는 영역으로 텍스트 영역이라고도 부른다.
- CPU는 코드 영역에 저장된 명령어를 하나씩 가져가서 처리한다.
- 즉, 코드 영역은 컴퓨터가 이해할 수 있는 기계어로 번역된 소스 코드가 저장된다.

### 데이터(data) 영역
- 프로그램의 전역 변수와 정적(static) 변수가 저장되는 영역이다.
- 데이터 영역은 프로그램의 시작과 함께 할당되며, 프로그램이 종료되면 소멸한다.

### 스택(stack) 영역
- 호출되는 함수의 지역 변수와 매개변수가 저장된다.
- 스택 영역은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸한다.
- 스택 영역에 저장되는 함수의 호출 정보를 스택 프레임(stack frame)이라고 하며, 프로그램에서 현재 실행 중인 함수에 대한 정보를 저장하는 스택 자료구조를 Call Stack이라고도 한다.
- 스택 영역은 푸시(push) 동작으로 데이터를 저장하고, 팝(pop) 동작으로 데이터를 꺼낸다.
- 스택은 후입선출(LIFO, Last-In First-Out) 방식에 따라 동작하므로, 가장 늦게 저장된 데이터가 가장 먼저 인출된다.
- 다른 메모리 영역과 다르게 높은 메모리 주소에서 낮은 메모리 주소의 방향으로 할당된다.
	- Stack은 서브루틴이 시작되면서 메모리 공간이 필요해진 지역변수들을 적재하고, 서브루틴이 끝나면 소멸한다. 그렇기때문에 데이터 용량에 대한 불확실성을 가지기 때문에 밑에서부터 채워 올린다.
- 컴파일 시 크기가 결정된다.

### 힙(heap) 영역
- 힙(heap) 영역은 사용자가 직접 관리할 수 있고 사용자가 관리해야하는 메모리 영역이다.
- 즉, 사용자가 원하는 시점에서 메모리를 할당하고(동적 할당) 소멸할 수 있도록 변수들이 할당되는 영역이다.
- 스택에서 포인터 변수를 할당하고, 그 포인터가 가리키는 힙 영역의 임의의 공간부터 동적 할당한 크기만큼 할당하여 사용한다.
- 힙 영역은 메모리의 낮은 주소에서 높은 주소의 방향으로 할당된다.
- 런타임에 크기가 결정된다.

> Heap Overflow : Heap영역이 Stack영역을 침범 </br>
> Stack Overflow : Stack영역이 Heap의 영역을 침범

## 우지현

### 메모리 구조

<img src="https://i.imgur.com/fbzJjII.png" width="600" height="400">

프로그램이 실행되기 위해서는 운영체제가 프로그램의 정보를 메모리에 로드해야 한다. 또한 프로그램이 실행되는 동안 CPU가 코드를 처리하기 위해서는 메모리가 명령어와 데이터들을 저장해야 한다. 이때 프로그램이 운영체제로부터 할당받는 메모리 공간은 Code, Data, Stack, Heap 4가지가 있다.

![메모리 공간](https://i.imgur.com/FdJ8Xbd.png)

### 코드(Code) 영역

- 우리가 작성한 소스코드가 들어가는 부분
- 즉, 실행할 프로그램의 코드가 저장되는 영역으로 텍스트 영역이라고도 부른다.
- 실행 파일을 구성하는 명령어들이 올라가는 메모리 영역으로 함수, 제어문, 상수 등이 여기에 지정된다.
- CPU는 코드 영역에 저장된 명령을 하나씩 가져가서 처리하게 된다.
- 프로그램이 시작하고 종료될 때까지 메모리에 계속 남아있는다.

### 데이터(Data) 영역

- 전역 변수와 static 변수가 할당되는 영역
- 프로그램의 시작과 동시에 할당되고 프로그램이 종료되어야 메모리가 소멸된다.

### 스택(Stack) 영역

- 프로그램이 자동으로 사용하는 임시 메모리 영역
- 함수 호출 시 생성되는 지역 변수와 매개변수가 저장되고 함수 호출이 완료되면 사라진다.
- 스택 영역에 저장되는 함수의 호출 정보를 스택 프레임(Stack Frame)이라고 한다.
- push로 데이터를 저장하고 pop으로 데이터를 인출한다.
- 후입선출(LIFO) 방식으로, 가장 나중에 들어온 데이터가 가장 먼저 인출된다.
  - 스택 영역이 메모리의 높은 주소에서 낮은 주소의 방향으로 할당되기 때문이다.
- 컴파일 시에 크기가 결정된다.

### 힙(Heap) 영역

- 프로그래머가 할당/해제하는 메모리 공간
- Java에서는 Garbage Collector가 자동으로 해제한다.
- 이 공간에 메모리를 할당하는 것을 동적 할당(Dynamic Memory Allocation)이라고 한다.
- 선입선출(FIFO) 방식으로, 가장 먼저 들어온 데이터가 가장 먼저 인출된다.
  - 힙 영역이 메모리의 낮은 주소에서 높은 주소의 방향으로 할당되기 때문이다.
- 런타임 시에 크기가 결정된다.
- Heap과 Stack은 같은 공간을 공유한다.
  - Heap이 메모리 위쪽 주소부터 할당되며 Stack은 아래쪽부터 할당된다.
  - 각 영역이 상대 공간을 침범하는 일이 발생할 수 있는데 이를 각각 Heap Overflow, Stack Overflow라고 한다.
  - Stack 영역이 크면 클수록 Heap 영역이 작아지고, Heap 영역이 크면 클수록 Stack 영역이 작아진다.
