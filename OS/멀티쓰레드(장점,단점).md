# 멀티쓰레드 (장점, 단점)

### 이수형

멀티쓰레드 장점

- 응답성
  - 프로그램의 일부 쓰레드가 중단되거나 긴 작업을 수행시에도 수행이 종료되지않고 계속되어 사용자에 대한 응답성 증가 
  - ex)하나의 쓰레드가 이미지를 로드해도 다른쓰레드에서 사용자와 상호작용 가능
<br/><br/>
- 경제성
  - 다른 쓰레드들과 메모리를 공유하기때문에 메모리나 시스템 자원소모가 적음
  - 통신이 필요한 경우에 쉽게 데이터를 주고받을수 있음
  - 프로세스의 context 통신과 달리 쓰레드의 context 통신은 캐시 메모리를 비울필요가 없어서 더 빠르다
<br/><br/>
- 멀티프로세서 활용
  - 다중 CPU 구조에서는 각각의 스레드가 다른 프로세서에서 병렬로 수행될 수 있어서 병렬성이 증가함

멀티쓰레드 단점

- 동시접근 문제
  - 둘 이상의 쓰레드가 동시에 접근하는 경우 프로세스와 달리 쓰레드는 메모리를 공유하고 있기 때문에 한 쓰레드가 다른 쓰레드에서 사용중인 변수나 자료구조에 접근하여 엉뚱한 결과를 초래할 수 있다
<br/><br/>
- 동기화 문제
  - 동기화(Mutex, Semaphore)를 통해 작업처리나 메모리 접근을 컨트롤 할 수 있으나 불필요한 부분까지 동기화를 할 경우 과도한 LOCK으로 인해 병목현상을 일으켜 성능이 저하될 수 있다
<br/><br/>
- 싱글코어에서의 문제
  - 싱글코어에서의 멀티쓰레드의 경우 오히려 쓰레드 생성시간이 오버헤드로 작용하여 단일쓰레드보다 느림

Mutex
- 쉽게말해서 Key가 하나뿐인 메커니즘 
- Key를 이용하여 접근컨트롤 Key가 있는 쓰레드만이 자원에 접근가능<br/>
접근이 끝났을때 wait를 호출한 쓰레드만 해제(Key넘기기) 가능 

Semaphore
- 쉽게말해서 Key가 여러개인 메커니즘
- Lock을 걸지 않은 쓰레드(wait호출x)도 Key넘기기 가능 


<br>

### 이유진
#### 멀티 쓰레드 (Multi thread)
하나의 프로세스 내에서 둘 이상의 쓰레드가 동시에 작업을 수행하는 것
> 멀티 프로세스 : 여러 개의 CPU를 사용하여 어러 프로세스를 동시에 수행하는 것

#### 장점
- 각 쓰레드가 자신이 속한 프로세스의 메모리(데이터, 힙 영역)를 공유한다. -> 시스템 자원의 낭비가 적다. (중복되는 자원의 생성과 관리 최소화)
  - 프로세스 생성은 많은 시간과 자원이 소모됨
- 쓰레드 간의 통신이 필요한 경우 전역 변수 또는 힙 영역을 이용하여 데이터를 주고받을 수 있다.
  - 프로세스 간 통신보다 훨씬 간단 + 캐시 메모리를 비울 필요 X
  - => 시스템 처리량이 향상되고 자원 소모가 줄어들어 프로그램의 응답 시간이 단축된다.
  - => 여러 프로세스로 나누어 작업하는 것 대신 여러 쓰레드로 나누어 작업하는 게 대체로 유리하다.

#### 단점
- 쓰레드 간의 문맥 교환(Context Switching)이 발생한다. (CPU가 번갈아가며 작업을 수행하기 때문에)
  - 문맥 교환 : 현재까지의 작업 상태나 다음 작업에 필요한 각종 데이터를 저장하고 읽어오는 작업
  - 문맥 교환에 걸리는 시간과 멀티 쓰레딩의 효율은 반비례
- 자원을 공유하므로 동기화 작업이 필요하다.
  - 동기화를 통해 공유 자원에 대한 접근을 관리한다. 
  - 과도학 Lock으로 인한 병목현상이 생길 수 있다. (성능저하)
  - 공유 자원에만 동기화 해준다. (불필요한 자원에도 동기화 할 경우 성능에 영향을 미친다.)

### 김현수
#### 멀티 스레딩(Multi-threading)이란?
- 하나의 프로세스를 다수의 실행 단위로 구분하여 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화하여 수행 능력을 향상 시키는 것
- 하나의 프로그램에서 동시에 여러 개의 일을 수행할 수 있도록 해줌 (사실 분산처리를 통해 동시에 실행되는 것 처럼 보이는 것)

#### 장점
- 시스템 처리량 증가(처리 비용 감소) : 스레드 사이의 작업량이 작아 Context Switching이 빠르다.
- 스레드는 프로세스 내의 Stack 영역을 제외한 모든 메모리를 공유한다.
	- 스레드 사이에서의 데이터 교환에 특별한 기법이 필요없기 때문에 통신의 부담이 적다.
	- 멀티 프로세스처럼 여러개의 프로세스에 메모리와 자원을 할당할 필요가 없어 경제적이다.
	- 코드 공유를 통해 한 응용프로그램 같은 주소공간내에서 여러개의 다른 활동성 스레드를 가질 수 있다.
- 응답성 : 오랜 시간이 걸리는 작업을 수행하는 동안에도 사용자의 입력을 처리할 수 있다.
- 실행의 흐름을 분리 : 한 작업을 한 스레드로 만들어, 개념적으로 실행의 흐름을 분리할 수 있다.


#### 단점
- 서로 다른 스레드가 데이터와 힙 영역을 공유한다.
	- 한 스레드가 다른 스레드에서 사용중인 변수나 자료구조에 접근하여, 엉뚱한 값을 읽어오거나 수정할 수 있다.
	- 따라서 멀티스레드 환경에서는 동기화 작업이 필요하다.
- 동기화 작업을 제대로 하지 않으면 락 문제와 데이터 병목 현상이 일어날 수 있다.
- 멀티 스레드 프로그램은 실행 순서가 보장되지 않는다.
- 하나의 스레드만 실행중인 경우 싱글 스레드의 실행시간이 개선되지 않고 오히려 지연될 수 있다.
