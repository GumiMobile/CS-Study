# 고차함수

## 김현수

### 고차함수란?
- 다른 함수를 인자로 받거나 함수를 반환하는 함수이다.
- 코틀린에서는 람다나 함수 참조를 사용해 함수를 값으로 표현할 수 있다.
Cancel changes
```kotlin
fun hoFun(x1: Int, argFun: (Int) -> Int){
	val result = argFun(10)
	println("x1 : $x1, someFun1 : $result")
}
hoFun(10, {x -> x * x })
```

코틀린에서는 일반적으로 데이터 타입을 선언할 때 x1: Int 형태로 콜론`:`을 기준으로 왼쪽에 변수명과 오른쪽에 타입을 명시한다. argFun: (Int) -> Int 코드는 일반적인 데이터 타입 선언과 같은 형태로 함수 타입을 선언한 것인데 콜론 오른쪽이 타입이다. (Int) -> Int는 Int 타입 매개변수를 하나 받고 반환값이 Int 타입인 함수라는 의미이다. 즉, 이 타입에 맞는 함수를 매개변수로 받을 수 있다는 선언이다. 또한, 콜론 왼쪽은 이 타입으로 대입받은 함수를 argFun이라는 이름으로 이용하겠다는 의미이다.

위와 같이 매개변수로 함수를 대입받는 함수를 고차 함수라 한다. hoFun의 첫 번째 인수는 숫자 데이터이며 두 번째 인수는 함수이다. hoFun 함수가 두 번째 매개변수를 함수 타입으로 선언했으므로 해당 타입에 맞추어 함수를 전달했는데, 이때 람다 함수를 이용한다.

위의 고차 함수 선언과 호출을 그림으로 설명하면 다음과 같다. 즉, 고차 함수 내에서 매개변수로 함수 타입을 선언하고 고차 함수를 호출하는 곳에서 람다 함수를 전달하는 구조이다.

<img src="https://t1.daumcdn.net/cfile/tistory/9966F64E5A98AC3114">

### 고차함수란

함수를 인자로 받거나, 반환하는 함수를 고차함수라 한다. 람다식을 인자로 받거나 반환 할 수 있다.

> 람다
>
> 익명함수를 지칭하는 용어이다. 주로 고차함수에 인자나 반환되는 함수로 쓰인다. 코드의 간결함, 지연 연산을 통한 퍼포먼스 향상, 그리고 기존 이터레이션 관련 코드를 구현하는 데 있어 불필요한 부분들을 제거할 수 있다는 점에서 비교적 중요하게 다루어지고 있다

### 함수 타입

코틀린에서 함수 타입을 정의하려면, 괄호에 인자의 타입을 넣고, 화살표로 리턴 타입을 명시한다. 반환타입이 nullable 이거나, 함수 타입 자체가 nullable일 수 있다.

- (Int, String) -> Unit
- (Int, String) -> Int?
- ((String, String) ->String?)?

#### 함수타입의 인자 이름

``` kotlin
fun getDataFromServer(url: String, 
                      callback: (response: Response, error: Error) -> Unit
) {
		// do something  
}

val url = "naver.com"
getDataFromServer(url) {response, error ->  } // 선언된 함수의 파라미터 이름을 그대로 사용
getDataFromServer(url) {res, err ->  } // 파라미터 이름 변경 가능
```

#### 인자로 받은 함수 호출

```kotlin
fun doTwoThree(predicate: (Int, Int) -> Int) {
  val result = predicate(2, 3)
  println(result)
}

fun main() {
  doTwoThree {a, b -> a + b}  // 5
  doTwoThree {a, b -> a * b}  // 6
}
```

doTwoThee 함수의 인자로 람다식을 받고 doTwoThree에서 인자 람다식을 호출하여 사용한다.

#### 함수에서 함수를 반환

``` kotlin
fun main() {
    fun higherOrder(func: (Int, Int) -> Int,
               a: Int,
               b: Int) = func(a, b) // func 라는 인자로 받은 함수 리턴
    
 	val inputLambda = {a: Int, b: Int -> a * b}
    
    print(higherOrder(inputLambda, 2,3)) // 6
}
```
