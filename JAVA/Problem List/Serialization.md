## Serialization이란?

## 이수형

### Serialization(직렬화)

자바 시스템 내부에서 사용되는 Object나 Data를 외부의 시스템에서도 사용할 수 있도록 byte형태로 데이터를 변환하는 기술

객체를 상태 그대로 저장하고 필요할때 다시 생성하기 위해 사용

- java.io.Serializable 인터페이스를 구현한 클래스의 객체만 직렬화 할 수 있다.

   - Serializable 인터페이스는 아무런 변수나 메소드가 없는 마커 인터페이스이다.

   - 단순히 표시를 위한 인터페이스
   - 클래스에 직렬화가 될수 없는 객체의 참조가 포함된 경우 transient라는 제어자를 사용하여 그 타입의 기본값으로 직렬화함

장점

- 복잡한 데이터 구조의 클래스라도 기본 조건만 지키면 바로 직렬화가 가능

- 데이터 타입이 자동으로 맞춰짐

단점

- 직렬화 된 데이터의 사이즈가 매우 큼

   - json등의 경량화된 형태로 저장하는것이 좋을수 있음

- 역 직렬화시 예외가 생길 수 있음을 주의해야함

사용처

- 서블릿 세션 (Servlet Session)

   - 서블릿 기반의 WAS(톰캣, 웹로직 등)들은 대부분 세션의 자바 직렬화를 지원

   - 파일로 저장하거나 세션 클러스터링, DB를 저장하는 옵션 등을 선택하게 되면 세션 자체가 직렬화가 되어 저장되어 전달

- 캐시

   - 실시간으로 요구되는 데이터가 아니라면 저장소를 이용해서 데이터 객체를 저장한 후 동일한 요청이 오면 DB를 다시 요청하는 것이 아니라 저장된 객체를 찾아서 응답하게 함

   - 이때 저장된 객체를 구성할때 직렬화를 이용하면 간편하기 때문에 많이 사용함

직렬화는 JAVA시스템 개발에 최적화 되있지만 데이터의 만료시점이나 구조나 필요시점 등 여러가지를 고려하여 CSV, JSON 등과 적절히 판단하여 사용

### Deserialization(역직렬화)

byte로 변환된 Data를 원래대로 Object나 Data로 변환하는 기술

- 직렬화 대상인된 객체의 클래스가 path에 존재해야하고 import 되어있어야함

- 직렬화 대상 객체와 동일한 serialVersionUID가 필요함
   - SUID 없이 사용하면 클래스 구조가 변경되거나 타입이 바뀌면 오류가 발생

## 우지현

### Serialization (직렬화)

![직렬화](https://i0.wp.com/techvidvan.com/tutorials/wp-content/uploads/sites/2/2020/05/Serialization-and-Deserialization-in-Java.jpg?w=802&ssl=1)

- 자바 시스템 내부에서 사용되는 객체 또는 데이터를 외부의 시스템에서도 사용할 수 있도록 바이트(byte) 형태로 데이터를 변환하는 기술
- JVM의 메모리에 상주(힙 또는 스택)되어 있는 객체 데이터를 바이트 형태로 변환하는 기술

각 PC의 OS마다 서로 다른 가상 메모리 주소 공간을 가지기 때문에, Reference Type의 데이터들은 인스턴스를 전달할 수 없다. 이런 문제를 해결하기 위해선 주소값이 아닌 Byte 형태로 직렬화된 객체 데이터를 전달해야 한다.

직렬화된 데이터들은 모두 Primitive Type(기본형)이 되고, 이는 파일 저장이나 네트워크 전송 시 파싱이 가능한 유의미한 데이터가 된다. 따라서, 전송 및 저장이 가능한 데이터로 만들어 주는 것이 바로 `직렬화`라고 말할 수 있다.

#### 직렬화 조건 및 방법

자바에서는 간단히 `java.io.Serializable` 인터페이스 구현으로 직렬화/역직렬화가 가능하며, `java.io.ObjectOutputStream`을 사용하여 직렬화를 진행한다.

- 직렬화 대상 : 인터페이스를 상속 받은 객체, Primitive Type의 데이터
  - Primitive Type이 아닌 Reference Type처럼 주소값을 지닌 객체들은 바이트로 변환하기 위해 Serializable 인터페이스를 구현해야 한다.
  - 직렬화하는 과정에서 제외하고 싶은 경우에는 `transient` 키워드를 사용할 수 있다.

#### 직렬화가 사용되는 곳

- Servlet Session
  - 세션을 서블릿 메모리 위에서 운용한다면 직렬화를 필요로 하지 않지만, 파일로 저장하거나 세션 클러스터링, DB를 저장하는 옵션 등을 선택하게 되면 세션 자체가 직렬화되어 저장되어 전달된다.
- Cache
  - Ehcache, Redis, Memcached 라이브러리 시스템에서 많이 사용
- Java RMI (Remote Method Invocation)
  - 원격 시스템 간의 메시지 교환을 위해서 자바에서 지원하는 기술

### Deserialization (역직렬화)

- byte로 변환된 데이터를 원래대로 객체 또는 데이터로 변환하는 기술
- 직렬화된 바이트 형태의 데이터를 객체로 변환해서 JVM으로 상주시키는 형태

#### 역직렬화 조건 및 방법

- 직렬화 대상이 된 객체의 클래스가 class path에 존재해야 하며 import 되어 있어야 한다.

- 중요한 점은 직렬화와 역직렬화를 진행하는 시스템이 서로 다를 수 있다는 것을 반드시 고려해야 한다.

- 자바 직렬화 대상 객체는 동일한 `serialVersionUID`를 가지고 있어야 한다.

  - `serialVersionUID`는 선언하지 않아도 자동으로 해시값이 할당된다.

  - 하지만 `serialVersionUID`는 개발자가 직접 관리해야 한다.

    - 기존의 클래스 멤버 변수가 변경되면 `serialVersionUID`가 달라지는데, 역직렬화 시 달라진 넘버로 Exception이 발생할 수 있다.

    - 따라서 직접 관리해야 클래스의 변수가 변경되어도 직렬화에 문제가 발생하지 않는다.

      > `serialVersionUID`을 관리하더라도, 멤버 변수의 타입이 다르거나, 제거 혹은 변수명을 바꾸게 되면 Exception은 발생하지 않지만 데이터가 누락될 수 있다.

- `java.io.ObjectInputStream`을 사용하여 역직렬화를 진행한다.

## 김민수

### 직렬화 Serialization

대부분 OS의 프로세스 구현은 서로 다른 가상 메모리 주소공간을 갖기 때문에 Object 타입의 참조값 데이터 인스턴스를 전달할 수 없다. 서로 다른 메모리 공간 사이의 데이터 전달을 위해서는 메모리 공간의 주소값이 아닌 Byte 형태로 직렬화 된 객체 데이터를 전달하면, 사용하는 쪽에서 역직렬화 하여 사용할 수 있다.

#### 직렬화의 조건

- `java.io.Serializable` 인터페이스를 상속받은 객체
- Primitive 타입의 데이터
- 객체의 멤버들 중 Serializable 인터페이스가 구현되지 않은 것이 존재하면 안된다.
- `Transient`가 선언된 멤버는 전송되지 않는다.
- `java.io.ObjectOutputStream`을 이용하여 직렬화 한다.

#### 직렬화가 사용되는 상황은?

- JVM의 메모리에서 상주하는 객체 데이터를 그대로 영속화(Persistence)할 때 사용된다.
  - 시스템이 종료되더라도 사라지지 않으며, 영속화된 데이터이기 때문에 네트워크로 전송도 가능하다.
- Servlet Session
  - Servlet 기반의 WAS들은 대부분 세션의 Java 직렬화를 지원한다.
  - 파일로 저장, 세션 클러스터링, DB를 저장하는 옵션 등을 선택하면 세션 자체가 직렬화되어 저장 및 전달된다.
- Cache
  - 캐시할 부분을 직렬화된 데이터를 저장해서 사용
- Java RMI(Remote Method Invocation)
  - 원격 시스템의 메서드를 호출할 때 전달하는 메세지(객체)를 직렬화하여 사용
  - 메세지(객체)를 전달받은 원격 시스템에서는 메세지(객체)를 역직렬화하여 사용
- 객체가 세션에 저장하지 않는 단순한 데이터 집합이고, 컨트롤러에서 생성되어서 뷰에서 소멸하는 데이터의 전달체라면 객체 직렬화는 고려하지 않아도 된다.
- 세션 관리를 스토리지나 네트워크 자원을 사용한다면 객체 직렬화를 해야 하고, 메모리에서만 관리한다면 객체 직렬화를 할 필요가 없다. 둘 다 고려한다면 직렬화가 필요하다.

### 역직렬화 Deserialization

직렬화된 파일 등을 역으로 직렬화하여 다시 객체의 형태로 만드는 것을 의미한다. 저장된 파일을 읽거나 전송된 스트림 데이터를 읽어 원래 객체의 형태로 복원한다.

#### 역직렬화의 조건

- 해당 객체의 클래스가 class path에 존재해야하며, import 되어 있어야 한다.
- 직렬화, 역직렬화를 진행하는 시스템이 서로 다를 수 있다는 점을 고려해야한다.
- `java.io.ObjectInputStream`을 이용하여 역직렬화를 한다.

#### serialVersionUID

직렬화의 대상이 되는 객체는 동일한 serialVersionUID를 가지고 있어야한다. 이를 선언하지 않아도 해시값이 생성되어 할당되지만 개발자가 직접 관리하는 것을 권장한다.

## 윤기재

### 직렬화(Serialize)란?
- 자바 시스템 내부에서 사용되는 Object 또는 Data를 외부의 자바 시스템에서도 사용할 수 있도록 byte 형태로 데이터를 변환하는 기술.

- JVM(Java Virtual Machine 이하 JVM)의 메모리에 상주(힙 또는 스택)되어 있는 객	체 데이터를 바이트 형태로 변환하는 기술

### 역직렬화(Deserialization)
- 바이트로 변환된 데이터를 다시 객체로 변환하는 기술
- 직렬화 대상인된 객체의 클래스가 path에 존재해야하고 import 되어있어야함
- 직렬화 대상 객체와 동일한 serialVersionUID가 필요함

### 직렬화 조건 및 방법
- 자바에서는 간단히 java.io.Serializable 인터페이스 구현으로 직렬화/역직렬화가 가능하며, java.io.ObjectOutputStream을 사용하여 직렬화를 진행한다.

> 직렬화 대상 : 인터페이스를 상속 받은 객체, Primitive Type의 데이터
Primitive Type이 아닌 Reference Type처럼 주소값을 지닌 객체들은 바이트로 변환하기 위해 Serializable 인터페이스를 구현해야 한다.

###  직렬화가 사용되는 곳
#### Servlet Session
- 세션을 서블릿 메모리 위에서 운용한다면 직렬화를 필요로 하지 않지만, 파일로 저장하거나 세션 클러스터링, DB를 저장하는 옵션 등을 선택하게 되면 세션 자체가 직렬화되어 저장되어 전달된다.

#### Cache
- Ehcache, Redis, Memcached 라이브러리 시스템에서 많이 사용

#### Java RMI (Remote Method Invocation)
- 원격 시스템 간의 메시지 교환을 위해서 자바에서 지원하는 기술
