# 번들, 컨텍스트
## 김민수

### Context

컨텍스트는 앱 환경과 전역 정보에 대한 <u>접점</u>이며 **<u>추상 클래스</u>**이다. 컨텍스트를 상속받은 클래스를 통해 앱의 특정 리소스와 클래스에 대한 접근 뿐만 아니라, 앱 구동에 필요한 액티비티 런칭, 브로드캐스팅, 인텐스 수신을 요청할 수 있다.

컨텍스트를 상속받는 유명한 클래스

- Application
- Activity
- Service

### 자주 사용하는 컨텍스트

- Application Context
- Activity Context

<img src="https://images.velog.io/images/l2hyunwoo/post/1f809f4c-1452-4283-ad67-786de87b2690/image.png" width=600/>

### Application Context

애플리케이션 컨텍스트는 <u>싱글 인스턴스</u>이며, Context를 상속받은 객체에서 getApplicationContext()로 접근 가능하다. 이 컨텍스트는 <u>**앱의 라이프사이클**</u>과 연결되어 있다.

사용 시기

- 액티비티의 범위를 넘어선 컨텍스트가 필요할 때
- 현재 컨텍스트와 분리된 라이프사이클을 가진 컨텍스트가 필요할 때

### Activity Context

액티비티 컨텍스트는 액티비티의 라이프사이클과 연결되어 있다. 따라서 액티비티가 소멸하면 액티비티의 컨텍스트도 소멸한다.

사용 시기

- UI와 관련하여 컨텍스트가 필요할 때
- 필요한 컨텍스트가 액티비티의 라이프사이클과 함께 소멸해야 할 때

### 컨텍스트 사용시 주의

- 컨텍스트 전달을 잘못할 경우, 메모리 누수가 발생한다.
- 애플리케이션 컨텍스트를 전달하면 앱 전체 라이프사이클과 함께 살아있으므로 GC의 대상이 되지 않는다.
- 액티비티 라이프사이클보다 긴 객체에서(전역 DB helper, ViewModel) 액티비티 컨텍스트 참조하면, 액티비티가 종료되어도 컨텍스트가 참조되어 있어 메모리 누수가 발생한다.

### Bundle

안드로이드에서 번들은 여러가지 타입의 값을 `String`키로 저장하는 `Map`클래스이다. 주로 액티비티 간 데이터를 주고 받을 때 번들을 사용한다. 또한 액티비티의 상태 저장 및 재생성에도 사용한다. 데이터를 저장하는 묶음이라 생각하면 된다.

번들에 값에 대응되는 타입

- 기본 자료형 및 CharSequence
- Serializable을 구현한 객체, 배열 및 ArrayList
- Parcelable을 구현한 객체, 배열 및 ArrayList
- IBinder
- Bundle
