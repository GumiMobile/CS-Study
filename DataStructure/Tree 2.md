## Tree 2 (BST, Segment Tree)

### 김현수

### BST(Binary Search Tree, 이진 탐색 트리)

#### BST의 정의와 특징
- 이진트리 기반의 탐색을 위한 자료구조이다.
- 이진탐색의 효율적인 탐색 능력을 가지며, 삽입과 삭제가 가능한 것이 특징이다.
- 중위순회(In-order Traversal) 방법으로 순회하며, 그 결과는 트리 내의 모든 값들을 오름차순으로 정렬한것과 같다.
- 최악의 경우 (경사이진트리 모양) 이진탐색트리의 시간복잡도는 O(n)이다.
- 최선의 경우 (포화이진트리 모양) 이진탐색트리의 시간복잡도는 O(log₂n)이다.

#### BST의 조건
- 모든 노드는 유일한 키를 갖는다. ( 키 = 노드 안에 들어 있는 데이터 값)
- 왼쪽 서브트리의 키들은 루트의 키보다 작다.
- 오른쪽 서브트리의 키들은 루트의 키보다 작다.
- 왼쪽과 오른쪽 서브트리도 이진탐색트리이다.

#### BST의 연산
- 검색(Search)
	1. 루트에서 시작한다.
	2. 검색 값을 루트와 비교한다. 루트보다 작으면 왼쪽으로, 크다면 오른쪽으로 재귀한다.
	3. 일치하는 값을 찾을 때까지 1~2를 반복한다.
	4. 검색 값이 없으면 null을 반환한다.
	
- 삽입(Insert)
	1. Root에서 시작한다.
	2. 삽입 값을 루트와 비교한다. 루트보다 작으면 왼쪽으로, 크다면 오른쪽으로 재귀한다.
	3. 리프 노드에 도달한 후 노드보다 크다면 오른쪽에, 작다면 왼쪽에 삽입한다.
	
- 삭제(Delete)
	- 삭제할 노드가 리프노드인 경우
		- 노드를 그냥 삭제한다.
	- 삭제할 노드에 자식이 하나 있는 경우
		- 노드를 삭제하고 자식 노드를 삭제된 노드의 부모에 직접 연결한다.
	- 삭제할 노드에 자식이 둘 있는 경우
		1. 삭제할 노드를 찾는다.
		2. 삭제할 노드의 successor 노드를 찾는다.
		3. 삭제할 노드와 successor 노드의 값을 바꾼다.
		4. successor 노드를 삭제한다.
		
		> successor 노드는 right subtree의 최소값, 즉 inorder 순회에서 다음 노드를 말한다.
		
<br>

### Segment Tree

#### Segment Tree의 정의와 특징
- 세그먼트 트리는 구간을 저장하기 위한 트리 이다.
- 리프노드는 배열의 값 그 자체를, 내부노드에는 자식 노드들의 합을 저장한다.
- 데이터의 합을 가장 빠르고 간단하게 구할 수 있는 자료구조
- 기존 데이터 배열의 크기를 N 이라 하면, 리프 노드의 개수가 N 이 되고, 트리의 높이 H 는 [ logN ] 이 되며, 트리의 크기는 2^(H+1) 이 된다.

>실제 노드는 2^(H+1)-1 개인데, 왜 공식에 의해서 나오는 값은 2^(H+1)개일까? 
>
>	-> 트리의 자식과 부모 관계를 계산하기 쉽게 하기 위해 배열의 0번째 인덱스를 사용하지 않고 1번 노드부터 사용하기 때문

#### 구간 합 구하기
두 구간에 대해서 왼쪽 구간을 left, 오른쪽 구간을 right 이라 할 때, 탐색 범위 [start, end] 와 합의 구간 [left, right] 의 관계는 다음과 같다.

- [left, right] 와 [start, end]가 전혀 겹치지 않는 경우
	- 탐색 범위 내에 구하는 범위가 존재하지 않는다. 그렇다면 탐색 범위에 값들은 아무 의미 없는 값이므로 0을 반환한다.
- [start, end] 가 [left, right]에 속해 있는 경우
	- 탐색 범위 내에 값들이 전부 구하는 범위의 값들이므로 하위 노드들의 합을 저장하고 있는 tree[index] 를 반환한다.
- [left, right] 와 [start, end] 가 일부 겹치는 경우
	- 위 경우에는 어디까지의 값들이 필요한지에 대해 재귀적으로 구해야 한다.
	
#### 값 변경하기
- 특정 인덱스의 값을 n만큼 증가한다고 가장하자.
- 바꾸고자 하는 Index값이 현재 탐색중인 범위 내에 속해있지 않은 경우
	- 자식 노드로 더 깊게 들어가도 해당 index가 나올 수 없으므로 탐색을 종료한다.
- 바꾸고자 하는 Index값이 현재 탐색중인 범위 내에 속해있는 경우
	- 바꾸고자 하는 Index에 대한 정보를 포함하고 있는 노드이므로 n만큼 더하고 더 깊은 탐색을 진행한다.
