# Index 3 (인덱스 성능과 고려해야 할 사항)
## 김민수

### 인덱스 성능과 고려해야 할 사항

인덱스를 사용할 경우 보통 검색 속도는 빨라진다. 하지만 데이터 삽입 작업의 경우, 인덱스 정렬로 인해 성능 저하가 생긴다. 또한 삭제 작업 시, 해당 인덱스를 삭제하지 않고 사용하지 않는 상태로 전환시키기 때문에 공간낭비를 일으킨다. 수정 작업은 앞선 두 작업의 단점을 모두 갖게 된다.

따라서 인덱스를 사용할 경우에는 데이터 삽입, 삭제, 수정이 빈번히 일어나는 테이블보단 조회를 자주하는 테이블에서 주로 사용하는 컬럼의 인덱스를 생성하는 것이 유리하다. 또한 컬럼의 중복도가 낮은(cardinality가 높은) 컬럼을 기준으로 인덱스를 생성해야 한다.

> 중복도와 cardinality
>
> 중복도는 각 컬럼의 값이 얼만큼 중복되었는지를 나타낸다. 예를 들어 주민번호와 이름의 경우 주민번호는 고유 값이므로 중복도가 낮고 이름은 상대적으로 주민번호보다 중복도가 높다. 이때 cardinality는 반대로 주민번호의 경우 cardinality는 높고 이름은 낮다.


## 이수형

### 인덱스 성능과 고려해야 할 사항

1. 인덱스가 쿼리의 성능을 향상시키니깐 모든 칼럼에 인덱스를 적용시킨다면?


   인덱스를 생성하게 되면 삽입,삭제,갱신을 실행할때 별도의 과정이 추가적으로 발생한다

- 삽입
   - 인덱스에 대한 데이터도 추가해야 하므로 그만큼 성능손실이 생긴다
- 삭제
   - 인덱스에 존재하는 값은 삭제하지 않고 사용안한다는 표시로 남게된다
- 갱신
   - 삽입,삭제의 문제점이 동시에 생김 (원래 데이터를 삭제후 삽입하는것이기때문)

2. 칼럼의 따라 인덱스 성능이 달라진다

   데이터 형식에 따라 인덱스의 효율성이 달라짐<br/>
   data range가 적은 칼럼을 인덱스로 설정한다면 인덱스를 읽고도 특정하기가 힘들어 또 찾아야함<br/>
   즉 중복도가 낮은 칼럼을 선택해야하고 활용도가 높은 칼럼을 인덱스 설정해야함

## 우지현

### 인덱스 성능과 고려해야 할 사항

인덱스는 하나 혹은 여러 개의 칼럼에 대해 설정할 수 있다. 단일 인덱스를 여러 개 생성할 수도 있고, 여러 칼럼을 묶어 복합 인덱스를 설정할 수도 있다. 

하지만 무조건 많이 설정하는게 검색 속도 향상을 높여주지는 않는다. 인덱스는 데이터베이스 메모리를 사용하여 테이블 형태로 저장되므로 개수와 저장 공간은 비례 한다. 따라서 **조회 시 자주 사용**하고 **고유한 값 위주**로 인덱스를 설정하는 것이 좋다.

- 카디널리티 (Cardinality)

  - 카디널리티가 높을수록 인덱스 설정에 좋은 칼럼이다.

  - 즉, 한 칼럼이 가지고 있는 값의 중복 정도가 낮을수록 좋다.

  - 칼럼에 사용되는 값의 다양성 정도, 즉 중복 수치를 나타내는 지표이다.

    > 예를 들어, 10개의 row를 가지는 '학생' 테이블에 '학번'과 '이름' 칼럼이 있다고 해보자.
    >
    > - '학번'은 학생마다 부여받으므로 10개 값 모두 고유하다.
    >   - 중복 정도가 낮으므로 카디널리티가 높다.
    > - '이름'은 동명이인이 있을 수 있으므로 1~10개 사이의 값을 가진다.
    >   - 중복 정도가 '학번'에 비해 높으므로 카디널리티가 낮다고 표현할 수 있다.

- 선택도 (Selectivity)

  - 선택도가 낮을수록 인덱스 설정에 좋은 칼럼이다.

  - 5~10% 정도가 적당하다.

  - 데이터에서 특정 값을 얼마나 잘 선택할 수 있는지에 대한 지표이다.

  - 선택도는 아래와 같이 계산한다.

    > 칼럼의 특정 값의 row 수 / 테이블의 총 row 수 * 100
    >
    > 칼럼의 값들의 평균 row 수 / 테이블의 총 row 수 * 100

- 활용도

  - 활용도가 높을수록 인덱스 설정에 좋은 칼럼이다.
  - 해당 칼럼이 실제 작업에서 얼마나 활용되는지에 대한 값이다.
  - 수동 쿼리 조회, 로직과 서비스에서 쿼리를 날릴 때 WHERE 절에 자주 활용되는지를 판단하면 된다.

- 중복도

  - 중복도가 없을수록 인덱스 설정에 좋은 칼럼이다.


## 윤기재

### 인덱스 성능과 고려해야 할 사항

#### 인덱스 대상 테이블 선정 기준
- MULTI BLOCK READ 수에 따라 판단
- 랜덤 액세스가 빈번한 테이블
- 특정 범위나 특정 순서로 데이터 조회가 필요한 테이블 
- 다른 테이블과 순차적 조인이 발생되는 테이블

> 오라클에서 인덱스를 이용하여 select 실행 하는 경우, HDD에서 한번에 하나씩의 블록을 읽어오기 때문에 이를 Single Block I/O라고 한다.
> 인덱스를 이용하지 않는 경우에는 필요한 모든 데이터를 HDD에서 읽어오기 때문에 이를 Multi Block I/O라고 한다.

#### 인덱스 대상 컬럼 선정 기준
- 인덱스 컬럼의 분포도가 10% ~ 15% 이내인 컬럼
- 분포도가 10% ~ 15% 이상이어도 부분 처리를 목적으로 하는 컬럼
- 입출력 장표 등에서 조회 및 출력 조건으로 사용되는 컬럼
- 인덱스가 자동 생성되는 기본키와 Unique키 제약 조건을 사용한 컬럼
- 가능한 한 수정이 빈번하지 않은 컬럼
- 인덱스들이 자주 조합되어 사용되는 경우 하나의 결합 인덱스로 생성
- 
> 분포도 
> 분포도(selectivity)가 좋다(우수하다)는 것은 서로 다른 데이터 값들이 중복없이 존재 한다는 의미를 나타낸다
> 산출식 : 1/해당 컬럼의 distinct 데이터 개수 * 100
> 분포도 값이 낮으면 좋은것

#### 인덱스 설계 시 고려사항
- 새로 추가되는 인덱스는 기존 액세스 경로에 영향을 미칠 수 있음
- 인덱스를 지나치게 많이 만들면 오버헤드가 발생
- 넓은 범위를 인덱스로 처리하면 많은 오버헤드가 발생
- 인덱스를 만들면 추가적인 저장 공간이 필요
- 인덱스와 테이블 데이터의 저장 공간이 분리되도록 설계

